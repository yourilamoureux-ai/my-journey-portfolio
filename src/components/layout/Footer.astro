---
import Social from "../ui/Social.astro";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";
import { useTranslations } from '@/i18n/utils.ts';

const locale = Astro.currentLocale;
const t = useTranslations(locale);

const [staticData] = await getCollection("staticData");
const {
  github,
  instagram,
  email,
  youtube,
  linkedin,
  x,
  emailIconName,
  youtubeIconName,
  linkedinIconName,
  instagramIconName,
  githubIconName,
  xIconName,
} = staticData.data;

const authorName = t('home.hero.name');
---

<footer
  class="relative bottom-0 w-full px-4 py-8 font-medium text-blacktext dark:bg-transparent dark:border-b-2 dark:border-zinc-800 dark:text-zinc-300 max-lg:mt-3"
  role="contentinfo"
  aria-label={t('footer.site_footer_aria_label')}
>
  <nav
    class="mx-auto flex max-w-7xl flex-row items-center justify-between gap-4 text-xl max-xl:px-6 max-sm:flex-col"
    aria-label={t('footer.nav_aria_label')}
  >
    <div
      class="relative h-6 cursor-pointer before:absolute before:left-1/2 before:top-1/2 before:h-full before:w-[40%] before:-translate-x-1/2 before:-translate-y-1/2 before:rounded-full before:bg-[#50fd8f25] before:blur-3xl before:opacity-80 before:-z-1 hover:text-mint-500 transition-all [text-shadow:0_1px_2px_#000]"
    >
      <a href={`/${locale === 'en' ? '' : locale}`} aria-label="Return to homepage">
        <img
          src="/images/logo.png"
          alt={`${authorName} Logo`}
          class="h-14 -my-4"
        />
      </a>
    </div>
    <div class="text-center">
      <a
        href={github || '#'}
        target="_blank"
        class="flex items-center justify-center gap-3 text-base font-normal italic max-sm:text-sm"
        aria-label={t('footer.about_development_aria_label')}
      >
        <Icon name="code" aria-hidden="true" /> {t('footer.developed_by')} <strong>{authorName}</strong>{t('footer.with_astro')}
      </a>
    </div>
    <div
      class="flex items-center justify-center gap-5"
      role="group"
      aria-label={t('footer.social_links_aria_label')}
    >
      {/* THE FIX: The t() function now only takes one argument */}
      {email && emailIconName && <Social
        link={`mailto:${email}`}
        iconName={emailIconName}
        label={t('footer.socials.email')}
      />}
      {instagram && instagramIconName && <Social
        link={instagram}
        iconName={instagramIconName}
        label={t('footer.socials.instagram')}
      />}
      {x && xIconName && <Social
        link={x}
        iconName={xIconName}
        label={t('footer.socials.x')}
      />}
      {youtube && youtubeIconName && <Social
        link={youtube}
        iconName={youtubeIconName}
        label={t('footer.socials.youtube')}
      />}
      {github && githubIconName && <Social
        link={github}
        iconName={githubIconName}
        label={t('footer.socials.github')}
      />}
      {linkedin && linkedinIconName && <Social
        link={linkedin}
        iconName={linkedinIconName}
        label={t('footer.socials.linkedin')}
      />}
    </div>
  </nav>
</footer>